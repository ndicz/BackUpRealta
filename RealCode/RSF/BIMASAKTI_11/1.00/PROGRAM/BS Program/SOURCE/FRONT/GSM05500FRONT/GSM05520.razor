@page "/GSM05520"
@using GSM05500Common.DTO
@inherits R_Page

<R_StackLayout Row="true">

    <R_ItemLayout col="1">
        <R_Label Class="fw-bold">Rate date</R_Label>
    </R_ItemLayout>

    <R_ItemLayout col="2">
        <R_DatePicker Value="GSM05520ViewModel.CrateTime"
                      R_ConductorSource="@_conductorRef"
                      ValueChanged="@((DateTime value) => OnChangedDate(value))" />
    </R_ItemLayout>

    <R_ItemLayout col="3">
        <R_Label Class="fw-bold"></R_Label>
    </R_ItemLayout>


    <R_ItemLayout col="2">
        <R_Label Class="fw-bold">Local Currency</R_Label>
    </R_ItemLayout>
    <R_ItemLayout col="1">
        <R_TextBox @bind-value="GSM05520ViewModel.loGridListLc.CLOCAL_CURRENCY_CODE"
                   R_ConductorSource="@_conductorRef" Enabled="false" />
    </R_ItemLayout>
    <R_ItemLayout col="2">
        <R_TextBox @bind-value="GSM05520ViewModel.loGridListLc.CLOCAL_CURRENCY_NAME"
                   R_ConductorSource="@_conductorRef" Enabled="false" />
    </R_ItemLayout>
</R_StackLayout>

<R_StackLayout Row="true">

    <R_ItemLayout col="1">
        <R_Label Class="fw-bold">Rate Type</R_Label>
    </R_ItemLayout>

    <R_ItemLayout col="2">
        <R_ComboBox Data="@GSM05520ViewModel.loGridListRate"
                    Value="GSM05520ViewModel.RateTypeCode"
                    ValueField="@nameof(GSM05520DTOGetRateType.CRATETYPE_CODE)"
                    TextField="@nameof(GSM05520DTOGetRateType.CRATETYPE_DESCRIPTION)"
                    R_ConductorSource="@_conductorRef" ValueChanged="@((string value) => OnChanged(value))"/>

    </R_ItemLayout>


    <R_ItemLayout col="3">
        <R_Label Class="fw-bold"></R_Label>
    </R_ItemLayout>


    <R_ItemLayout col="2">
        <R_Label Class="fw-bold">Base Currency</R_Label>
    </R_ItemLayout>
    <R_ItemLayout col="1">
        <R_TextBox @bind-value="GSM05520ViewModel.loGridListLc.CBASE_CURRENCY_CODE"
                   R_ConductorSource="@_conductorRef" Enabled="false" />
    </R_ItemLayout>
    <R_ItemLayout Class="col-2">
        <R_TextBox @bind-value="GSM05520ViewModel.loGridListLc.CBASE_CURRENCY_NAME"
                   R_ConductorSource="@_conductorRef" Enabled="false" />
    </R_ItemLayout>
</R_StackLayout>



<R_StackLayout>


    <R_Grid @ref="@_gridRef5520"
            DataSource="GSM05520ViewModel.loGridList"
            Pageable="true"
            R_ConductorGridSource="@_conGridGSM05520Ref"
            R_GridType="@R_eGridType.Original"
            AllowAddNewRow="true"
            AllowEditRow="true"
            Width="100%"
            Height="430px"
            AllowDeleteRow="true"
            R_ServiceGetListRecord="@Grid_R_ServiceGetListRecordRate"
            R_Before_Open_Grid_Lookup="Before_Open_Lookup"
            R_After_Open_Grid_Lookup="After_Open_Lookup">
        <R_GridColumns>

            <R_GridLookupColumn Width="250px" FieldName="CCURRENCY_CODE" HeaderText="Currency Code" R_EnableAdd></R_GridLookupColumn>
            <R_GridTextColumn Width="150px" FieldName="CCURRENCY_NAME" HeaderText="Currency Name" />
            <R_GridNumericColumn Width="190px" FieldName="NLBASE_RATE_AMOUNT" HeaderText="Local Curr. Base Rate" R_EnableEdit R_EnableAdd Arrows="false"></R_GridNumericColumn>
            <R_GridNumericColumn Width="175px" FieldName="NLCURRENCY_RATE_AMOUNT" HeaderText="Local Currency Rate" R_EnableEdit R_EnableAdd Arrows="false"></R_GridNumericColumn>
            <R_GridNumericColumn Width="184px" FieldName="NBBASE_RATE_AMOUNT" HeaderText="Base Curr. Base Rate" R_EnableEdit R_EnableAdd Arrows="false"></R_GridNumericColumn>
            <R_GridNumericColumn Width="171px" FieldName="NBCURRENCY_RATE_AMOUNT" HeaderText="Base Currency Rate" R_EnableEdit R_EnableAdd Arrows="false"></R_GridNumericColumn>
            <R_GridTextColumn Width="200px" FieldName="CUPDATE_BY" HeaderText="Updated By" />
            <R_GridTextColumn Width="200px" FieldName="DUPDATE_DATE" HeaderText="Updated Date" />
            <R_GridTextColumn Width="170px" FieldName="CCREATE_BY" HeaderText="Created By" />
            <R_GridTextColumn Width="170px" FieldName="CRATE_DATE" HeaderText="Created Date"></R_GridTextColumn>
        </R_GridColumns>
    </R_Grid>

</R_StackLayout>
<R_ConductorGrid @ref="@_conGridGSM05520Ref"
                 R_ViewModel="@GSM05520ViewModel"
                 R_ServiceGetRecord="@Grid_ServiceGetRecordRate"
                 R_ServiceSave="@Grid_ServiceSaveRate"
                 R_ServiceDelete="@Grid_ServiceDeleteRate"
                 R_AfterAdd="@Conductor_AfterAdd"
                 R_AfterSave="@Conductor_Display"
                 R_Saving="@Conductor_Saving"
                 @*R_AfterDelete="@Grid_AfterDelete"*@
                 R_BeforeEdit="@Conductor_BeforeEdit"
                 R_BeforeAdd="@Conductor_BeforeAdd"
                 R_IsHeader="true"
                 R_Validation="R_Validation"/>